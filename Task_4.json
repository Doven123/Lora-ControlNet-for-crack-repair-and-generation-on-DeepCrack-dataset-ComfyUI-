{"id":"d2d1faaf-2721-471e-a202-305446a968ee","revision":0,"last_node_id":49,"last_link_id":93,"nodes":[{"id":31,"type":"UNETLoader","pos":[-229.40862878904045,-171.67772963413142],"size":[315,82],"flags":{},"order":0,"mode":0,"inputs":[{"label":"unet_name","localized_name":"UNet名称","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"label":"weight_dtype","localized_name":"数据类型","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[74]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"UNETLoader","models":[{"name":"flux1-dev.safetensors","url":"https://huggingface.co/black-forest-labs/FLUX.1-dev/resolve/main/flux1-dev.safetensors?download=true","directory":"diffusion_models"}]},"widgets_values":["flux1-dev-fp8.safetensors","default"],"color":"#322","bgcolor":"#533"},{"id":34,"type":"DualCLIPLoader","pos":[-224.78515309118455,-40.66299273128176],"size":[315,130],"flags":{},"order":1,"mode":0,"inputs":[{"label":"clip_name1","localized_name":"CLIP名称1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"label":"clip_name2","localized_name":"CLIP名称2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"label":"type","localized_name":"类型","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"label":"device","localized_name":"设备","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[62,63]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"DualCLIPLoader","models":[{"name":"t5xxl_fp16.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors?download=true","directory":"text_encoders"},{"name":"clip_l.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors?download=true","directory":"text_encoders"}]},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"],"color":"#322","bgcolor":"#533"},{"id":17,"type":"LoadImage","pos":[-592.2539360973652,-170.90413092343272],"size":[315,314],"flags":{},"order":2,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[71]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage"},"widgets_values":["11215-4.jpg","image"],"color":"#332922","bgcolor":"#593930"},{"id":37,"type":"LoraLoaderModelOnly","pos":[138.71251191813425,-171.82374431171613],"size":[315,82],"flags":{},"order":7,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":74},{"label":"lora_name","localized_name":"LoRA名称","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"label":"strength_model","localized_name":"模型强度","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[78]}],"title":"LoRA加载器（深度约束）","properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"flux1-depth-dev-lora.safetensors","url":"https://huggingface.co/black-forest-labs/FLUX.1-Depth-dev-lora/resolve/main/flux1-depth-dev-lora.safetensors?download=true","directory":"loras"}]},"widgets_values":["flux1-depth-dev-lora.safetensors",1],"color":"#232","bgcolor":"#353"},{"id":41,"type":"LoraLoaderModelOnly","pos":[137.82300152756858,-40.14544619752211],"size":[315,82],"flags":{},"order":11,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":78},{"label":"lora_name","localized_name":"LoRA名称","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"label":"strength_model","localized_name":"模型强度","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"label":"MODEL","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[77]}],"title":"LoRA加载器（训练的裂纹风格模型）","properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoraLoaderModelOnly","models":[{"name":"flux1-depth-dev-lora.safetensors","url":"https://huggingface.co/black-forest-labs/FLUX.1-Depth-dev-lora/resolve/main/flux1-depth-dev-lora.safetensors?download=true","directory":"loras"}]},"widgets_values":["flux_lora_QAZWSXroadcrack_rank16_bf16-step03000.safetensors",1],"color":"#232","bgcolor":"#353"},{"id":23,"type":"CLIPTextEncode","pos":[141.9727713165962,157.64936798056897],"size":[308.92759594974905,128.70923468510364],"flags":{},"order":8,"mode":0,"inputs":[{"label":"clip","localized_name":"clip","name":"clip","type":"CLIP","link":62},{"label":"text","localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[41]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"CLIPTextEncode"},"widgets_values":["A highly detailed, close-up, macro photograph of ground QAZWSXroadcrack cracks on a weathered concrete surface. "],"color":"#432","bgcolor":"#653"},{"id":7,"type":"CLIPTextEncode","pos":[156.30671033234785,343.9388170284749],"size":[425.2799987792969,180.61000061035156],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[{"label":"clip","localized_name":"clip","name":"clip","type":"CLIP","link":63},{"label":"text","localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[68]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#432","bgcolor":"#653"},{"id":42,"type":"LoadImage","pos":[-593.8360016084182,195.61627976236966],"size":[315,314],"flags":{},"order":3,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[81]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage"},"widgets_values":["11215-5.png","image"],"color":"#332922","bgcolor":"#593930"},{"id":43,"type":"LoadImage","pos":[-591.986674823052,557.1718888533688],"size":[315,314],"flags":{},"order":4,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[82]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage"},"widgets_values":["11215-13.png","image"],"color":"#332922","bgcolor":"#593930"},{"id":44,"type":"ImageBatch","pos":[-191.91728247485844,255.30527447641413],"size":[241.7164653528289,46],"flags":{},"order":10,"mode":0,"inputs":[{"label":"image1","localized_name":"图像1","name":"image1","type":"IMAGE","link":81},{"label":"image2","localized_name":"图像2","name":"image2","type":"IMAGE","link":82}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[83]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ImageBatch"},"widgets_values":[]},{"id":45,"type":"easy imageBatchToImageList","pos":[-181.74563593957555,347.8670872197786],"size":[220.8269068112285,26],"flags":{},"order":13,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"IMAGE","link":83}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","shape":6,"type":"IMAGE","links":[89]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"1.3.4","Node name for S&R":"easy imageBatchToImageList"},"widgets_values":[]},{"id":32,"type":"VAELoader","pos":[-228.48391248487715,134.79896713404145],"size":[315,58],"flags":{},"order":5,"mode":0,"inputs":[{"label":"vae_name","localized_name":"vae名称","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"label":"VAE","localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[60,69,90]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAELoader","models":[{"name":"ae.safetensors","url":"https://huggingface.co/black-forest-labs/FLUX.1-schnell/resolve/main/ae.safetensors?download=true","directory":"vae"}]},"widgets_values":["ae.safetensors"],"color":"#322","bgcolor":"#533"},{"id":26,"type":"FluxGuidance","pos":[841.3149592550558,-56.560528681828316],"size":[210,58],"flags":{},"order":12,"mode":0,"inputs":[{"label":"conditioning","localized_name":"条件","name":"conditioning","type":"CONDITIONING","link":41},{"label":"guidance","localized_name":"引导","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[67]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"FluxGuidance"},"widgets_values":[10]},{"id":46,"type":"ControlNetLoader","pos":[508.5713636978604,-7.123295377914737],"size":[277.12027674030514,58],"flags":{},"order":6,"mode":0,"inputs":[{"label":"control_net_name","localized_name":"ControlNet名称","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"label":"CONTROL_NET","localized_name":"ControlNet","name":"CONTROL_NET","type":"CONTROL_NET","links":[88]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ControlNetLoader"},"widgets_values":["FLUX.1-dev-ControlNet-Union-Pro-2.0 .safetensors"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":47,"type":"ControlNetApplyAdvanced","pos":[506.8746482506656,110.86780831154203],"size":[278.8169921875,186],"flags":{},"order":15,"mode":0,"inputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":84},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":85},{"label":"control_net","localized_name":"ControlNet","name":"control_net","type":"CONTROL_NET","link":88},{"label":"image","localized_name":"图像","name":"image","type":"IMAGE","link":89},{"label":"vae","localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":90},{"label":"strength","localized_name":"强度","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null},{"label":"start_percent","localized_name":"开始百分比","name":"start_percent","type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"label":"end_percent","localized_name":"结束百分比","name":"end_percent","type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","links":[86]},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","links":[87]}],"title":"应用ControlNet","properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":8,"type":"VAEDecode","pos":[847.6537111625503,106.45954072422386],"size":[210,46],"flags":{},"order":18,"mode":0,"inputs":[{"label":"samples","localized_name":"Latent","name":"samples","type":"LATENT","link":7},{"label":"vae","localized_name":"vae","name":"vae","type":"VAE","link":60}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[91]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":48,"type":"PreviewImage","pos":[-179.7113376739209,443.4807159782714],"size":[1586.4081062758255,430.831563145661],"flags":{},"order":19,"mode":0,"inputs":[{"label":"images","localized_name":"图像","name":"images","type":"IMAGE","link":91}],"outputs":[],"title":"最终输出图像","properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"PreviewImage"},"widgets_values":[],"color":"#233","bgcolor":"#355"},{"id":35,"type":"InstructPixToPixConditioning","pos":[500.6506375498408,-168.73745682916996],"size":[285.0410028883248,87.0171491328274],"flags":{},"order":14,"mode":0,"inputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":67},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":68},{"label":"vae","localized_name":"vae","name":"vae","type":"VAE","link":69},{"label":"pixels","localized_name":"像素","name":"pixels","type":"IMAGE","link":71}],"outputs":[{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","slot_index":0,"links":[84]},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","slot_index":1,"links":[85]},{"label":"latent","localized_name":"Latent","name":"latent","type":"LATENT","slot_index":2,"links":[92]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"InstructPixToPixConditioning"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":49,"type":"RepeatLatentBatch","pos":[850.6764873916381,229.8760223320739],"size":[210,58],"flags":{},"order":16,"mode":0,"inputs":[{"label":"samples","localized_name":"Latent","name":"samples","type":"LATENT","link":92},{"label":"amount","localized_name":"数量","name":"amount","type":"INT","widget":{"name":"amount"},"link":null}],"outputs":[{"label":"LATENT","localized_name":"Latent","name":"LATENT","type":"LATENT","links":[93]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.67","Node name for S&R":"RepeatLatentBatch"},"widgets_values":[2]},{"id":3,"type":"KSampler","pos":[1079.4889761505801,-166.066004962278],"size":[315,474],"flags":{},"order":17,"mode":0,"inputs":[{"label":"model","localized_name":"模型","name":"model","type":"MODEL","link":77},{"label":"positive","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":86},{"label":"negative","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":87},{"label":"latent_image","localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":93},{"label":"seed","localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"label":"steps","localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"label":"cfg","localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"label":"sampler_name","localized_name":"采样器名称","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"label":"scheduler","localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"label":"denoise","localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"label":"LATENT","localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"KSampler"},"widgets_values":[1234,"fixed",20,1,"euler","normal",1]}],"links":[[7,3,0,8,0,"LATENT"],[41,23,0,26,0,"CONDITIONING"],[60,32,0,8,1,"VAE"],[62,34,0,23,0,"CLIP"],[63,34,0,7,0,"CLIP"],[67,26,0,35,0,"CONDITIONING"],[68,7,0,35,1,"CONDITIONING"],[69,32,0,35,2,"VAE"],[71,17,0,35,3,"IMAGE"],[74,31,0,37,0,"MODEL"],[77,41,0,3,0,"MODEL"],[78,37,0,41,0,"MODEL"],[81,42,0,44,0,"IMAGE"],[82,43,0,44,1,"IMAGE"],[83,44,0,45,0,"IMAGE"],[84,35,0,47,0,"CONDITIONING"],[85,35,1,47,1,"CONDITIONING"],[86,47,0,3,1,"CONDITIONING"],[87,47,1,3,2,"CONDITIONING"],[88,46,0,47,2,"CONTROL_NET"],[89,45,0,47,3,"IMAGE"],[90,32,0,47,4,"VAE"],[91,8,0,48,0,"IMAGE"],[92,35,2,49,0,"LATENT"],[93,49,0,3,3,"LATENT"]],"groups":[{"id":1,"title":"模型加载","bounding":[-239.4086287890405,-245.27773573764696,335,451.7753964734824],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"输入图像（原图和遮罩）","bounding":[-603.8360016084182,-244.5041309234327,336.8493267853662,1125.6760197768015],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Lora模型（串联即可）","bounding":[127.82300152756858,-245.42374431171612,335.8895103905657,297.27829811419406],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Prompt","bounding":[131.9727713165962,84.04936798056897,328.92759594974905,269.88944904790594],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"ControlNet边缘约束","bounding":[490.6506375498408,-242.33745682916995,315.2126494236077,593.9605254166576],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"采样处理","bounding":[831.3149592550558,-239.66600496227798,581.3113651651524,592.1836137406628],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7865000000000004,"offset":[676.087719637128,257.3459010304298]},"frontendVersion":"1.23.4","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}